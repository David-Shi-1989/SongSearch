<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <title>Music Download 爬虫音乐</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" type="text/css" href="../static/style/main.css">
  <link rel="stylesheet" type="text/css" href="../static/bootstrap/dist/css/bootstrap.min.css">
  <script type="text/javascript" src="../static/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="../static/bootstrap/dist/js/bootstrap.min.js"></script>
  <style>
    #search_form {
        width: 520px;
        margin-bottom: 30px;
    }
    #search_form_name select{
      width:150px;
    }
    #search_form_submit {
      margin: 10px 0;
    }
  </style>
</head>

<body>
  <div id="main">
    <h2>Music Download 爬虫音乐</h2>
    <form id="search_form">
      <div class="input-group" id="search_form_name">
        <div class="input-group-btn">
          <select class="form-control">
            <option>酷我(实现)</option>
            <option>酷狗(待开发)</option>
            <option>虾米(待开发)</option>
            <option>QQ音乐(待开发)</option>
            <option>网易云音乐(待开发)</option>
          </select>
        </div>
        <input type="text" class="form-control" aria-label="..." id="input_singer_name">
      </div>
      <button type="button" class="btn btn-primary" id="search_form_submit" onclick="onSubmitBtnClick()">开始搜索</button>
    </form>
    <div>
      <table class="table table-striped" id="tb_list">
        <caption>搜索结果</caption>
        <thead>
          <tr>
            <th>歌曲名称</th>
            <th>专辑</th>
            <th>歌手</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Tanmay</td>
            <td>Bangalore</td>
            <td>560001</td>
            <td>560001</td>
          </tr>
          <tr>
            <td>Sachin</td>
            <td>Mumbai</td>
            <td>400003</td>
            <td>560001</td>
          </tr>
          <tr>
            <td>Uma</td>
            <td>Pune</td>
            <td>411027</td>
            <td>560001</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</body>
<script type="text/javascript">
  function onSubmitBtnClick() {
    var name = document.getElementById('input_singer_name').value
    if (name) {
      $.ajax({
        method: 'get',
        url: '/singer/' + name,
        success: function (data) {
          $("#tb_list tbody").html('')
          data.forEach(element => {
            appendRowToTable(element)
          })
        }
      })
    }
  }
  function appendRowToTable (obj) {
    var tbEl = $("#tb_list tbody")
    var html = `
      <tr>
        <td>%NAME%</td>
        <td>%ALBUM%</td>
        <td>%SINGER%</td>
        <td>%HREF%</td>
      </tr>
    `
    html = html.replace('%NAME%', obj.name)
      .replace('%ALBUM%', obj.album)
      .replace('%SINGER%', obj.singer)
      .replace('%HREF%', obj.href)
    tbEl.append(html)
  }
</script>

</html>